<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>MINTverse - Transform Global Health at Scale</title>
    <meta name="description" content="MINTverse: a dashboard-ready, suite of deep-learning emulators for malaria interventions.">

    <style>
      :root{
        --black:#000; --white:#fff;
        --green:#00d4aa; --accent:#0071e3;
        --accent-glow:#0051a2;
        --text-muted:#86868b;
        --brand-text-gradient: linear-gradient(90deg, #fff 0%, var(--green) 100%);
        --cards-offset: clamp(160px, 24vh, 380px);
        --copy-delay: 1s;
        --copy-reveal-duration: .5s; /* tweak if you want a slower/faster fade/slide */
      }
      
      *{ margin:0; padding:0; box-sizing:border-box; }
      html{ scroll-behavior:smooth; }
      body{
        font-family:-apple-system,BlinkMacSystemFont,'SF Pro Display','Segoe UI',Roboto,Helvetica,Arial,sans-serif;
        background:#000; color:#fff; line-height:1.6; overflow-x:hidden;
        -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
      }

      /* Loading bar */
      .loading-bar{
        position:fixed; top:0; left:0; right:0; height:2px;
        background:linear-gradient(90deg, var(--green) 0%, var(--accent) 100%);
        transform-origin:left;
        animation:loadingBar 1.5s cubic-bezier(.4,0,.2,1) forwards;
        z-index:10001;
      }
      @keyframes loadingBar{
        0%{transform:scaleX(0);opacity:1}
        90%{transform:scaleX(1);opacity:1}
        100%{transform:scaleX(1);opacity:0}
      }

      /* Intro overlay */
      html.intro-lock, body.intro-lock{ height:100%; overflow:hidden; }
      body.intro-lock::-webkit-scrollbar{ display:none; }

      .cinematic-intro{
        position:fixed; inset:0; z-index:10000; background:#000;
        display:flex; align-items:center; justify-content:center;
        transition:opacity 1s cubic-bezier(.4,0,.2,1);
      }
      .cinematic-intro.hide{ opacity:0; pointer-events:none; }
      .cinematic-intro.complete{ display:none; }

      .intro-grid{
        position:absolute; top:-50%; left:-50%; width:200%; height:200%;
        background:url('data:image/svg+xml,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><defs><pattern id="grid" width="100" height="100" patternUnits="userSpaceOnUse"><path d="M 100 0 L 0 0 0 100" fill="none" stroke="rgba(255,255,255,0.02)" stroke-width="1"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
        animation:driftSlow 30s linear infinite; opacity:0; animation-delay:.5s; animation-fill-mode:forwards;
      }
      @keyframes driftSlow{
        0%{transform:translate(0,0);opacity:0}
        10%{opacity:.5}
        100%{transform:translate(100px,100px);opacity:.5}
      }

      .intro-halo{
        position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
        width:120%; height:120%;
        background:radial-gradient(600px 400px at 50% 50%,
          rgba(0,212,170,.35),
          rgba(0,113,227,.22) 30%,
          rgba(0,0,0,0) 70%);
        filter:blur(60px); opacity:0;
        animation:haloReveal 3s cubic-bezier(.4,0,.2,1) forwards, haloBreathe 8s ease-in-out infinite alternate;
        animation-delay:.5s, 3s;
      }
      @keyframes haloReveal{ to{opacity:.8} }
      @keyframes haloBreathe{
        0%{ transform:translate(-50%,-50%) scale(1) }
        100%{ transform:translate(-50%,-48%) scale(1.05) }
      }

      .intro-content{ position:relative; z-index:2; text-align:center; max-width:900px; padding:0 40px; }
      .intro-logo{
        font-size:clamp(60px,10vw,120px); font-weight:700; letter-spacing:-.04em;
        background:linear-gradient(180deg,#fff 0%,#86868b 100%);
        -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;
        opacity:0; transform:scale(.95);
        animation:logoReveal 1.5s cubic-bezier(.4,0,.2,1) forwards; animation-delay:1s;
        transition:transform .6s ease, opacity .6s ease;
      }
      @keyframes logoReveal{ to{opacity:1; transform:scale(1)} }

      /* Compact the header slightly when cards start to avoid overlap */
      .intro-content.cards-phase .intro-logo{ transform:translateY(-10px) scale(.9); opacity:.75; }
      .intro-content.cards-phase .intro-tagline{ opacity:.85; }
      .intro-content.cards-phase .intro-context{ opacity:.9; }

      .intro-tagline{
        font-size:clamp(20px,3vw,32px);
        color:var(--text-muted);
        margin:16px 0 6px; position:relative;
      }
      .intro-tagline span{
        display:inline-block; opacity:0; transform:translateY(20px);
        animation:fadeUp 1s cubic-bezier(.4,0,.2,1) forwards; animation-delay:2.5s;
      }

      .intro-context{
        font-size:18px; color:#d2d2d7; margin-top:10px; opacity:0; position:relative; display:inline-block;
        animation:fadeUp 1s cubic-bezier(.4,0,.2,1) forwards; animation-delay:4s;
      }
      .intro-context::after{
        content:''; position:absolute; left:50%; transform:translateX(-50%);
        bottom:-10px; width:0; height:2px;
        background:linear-gradient(90deg, var(--green), var(--accent));
        box-shadow:0 0 20px rgba(0,212,170,.35);
        animation:lineGrow 2s cubic-bezier(.4,0,.2,1) forwards; animation-delay:4s;
      }

      @keyframes fadeUp{ from{opacity:0; transform:translateY(20px)} to{opacity:1; transform:translateY(0)} }
      @keyframes lineGrow{ to{ width:60% } }

      /* Title cards */
      .title-cards{
      position: relative;
      margin-top: var(--cards-offset);  /* was: clamp(72px, 12vh, 160px) */
      width: 100%;
      max-width: min(92vw, 720px);
      padding-inline: 16px;
      opacity: 0;
      animation: cardsReveal .5s forwards;
      animation-delay: 6s;
      }
      @keyframes cardsReveal{ to{opacity:1} }
      .title-card{ position:absolute; inset:auto 0 0 0; text-align:center; opacity:0; transform:scale(.98); transition:all 1s cubic-bezier(.4,0,.2,1); }
      .title-card.active{ opacity:1; transform:scale(1); }
      .title-card h2{
        font-size:clamp(36px,6.2vw,64px); font-weight:700;
        background:linear-gradient(90deg, var(--green) 0%, #00ffcc 100%);
        -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;
        margin-bottom:10px; line-height:1.05; text-wrap:balance;
      }
      .title-card p{ font-size:clamp(16px,2.6vw,20px); color:var(--text-muted); }

      .skip-intro{
        position:absolute; bottom:40px; right:40px; color:#86868b; font-size:14px; text-decoration:none;
        opacity:0; animation:fadeIn 1s forwards; animation-delay:2s; transition:color .3s; cursor:pointer;
      }
      .skip-intro:hover{ color:#fff; }
      @keyframes fadeIn{ to{opacity:.6} }

      /* Scroll-scrub beats */
      .scroll-scrub-section{ position:relative; height:500vh; z-index:100; display:none; }
      @media (max-width:768px){ .scroll-scrub-section{ height:300vh; } }
      @media (max-height: 700px){
      :root{ --cards-offset: clamp(180px, 28vh, 420px); }
      }

      .scroll-scrub-content{
        position:sticky; top:0; height:100vh; display:flex; align-items:center; justify-content:center; overflow:hidden; background:#000;
      }

      .scrub-beat{
        position:absolute; width:100%; text-align:center; opacity:0; transform:scale(.9);
        transition:all .8s cubic-bezier(.4,0,.2,1);
      }
      .scrub-beat.active{ opacity:1; transform:scale(1); }
      .scrub-beat.fade-in{ animation:beatFadeIn 1s cubic-bezier(.4,0,.2,1) forwards; }
      @keyframes beatFadeIn{ from{opacity:0; transform:scale(.95)} to{opacity:1; transform:scale(1)} }

      .scrub-beat h2{
        font-size:clamp(48px,8vw,96px); font-weight:700;
        background:linear-gradient(180deg,#fff 0%,#86868b 100%);
        -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;
        margin-bottom:20px;
      }
      .scrub-beat p{
        font-size:clamp(18px,2.5vw,28px); color:var(--text-muted);
        position:relative; display:inline-block; padding-bottom:10px;
      }
      .scrub-beat p::after{
        content:''; position:absolute; left:0; bottom:-8px; width:100%; height:2px;
        background:linear-gradient(90deg, var(--green), var(--accent));
        box-shadow:0 0 20px rgba(0,212,170,.35);
        transform:scaleX(0); transform-origin:center; transition:transform .6s cubic-bezier(.4,0,.2,1); opacity:.95;
      }
      .scrub-beat.active p::after, .scrub-beat.seen p::after{ transform:scaleX(1); }
      /* Paragraph is hidden until the beat activates */
      .scrub-beat p{
      opacity: 0;
      transform: translateY(8px);
      transition:
         opacity var(--copy-reveal-duration) cubic-bezier(.4,0,.2,1) var(--copy-delay),
         transform var(--copy-reveal-duration) cubic-bezier(.4,0,.2,1) var(--copy-delay);
      }

      /* When the beat becomes active (or has been seen), reveal the paragraph */
      .scrub-beat.active p,
      .scrub-beat.seen p{
      opacity: 1;
      transform: translateY(0);
      }

      /* Keep the underline animating from the CENTER, and sync its start to the paragraph reveal */
      .scrub-beat p::after{
      /* you already have most of this, we add the delay */
      transform: scaleX(0);
      transform-origin: center;
      transition: transform .6s cubic-bezier(.4,0,.2,1) var(--copy-delay);
      }
      .scrub-beat.active p::after,
      .scrub-beat.seen p::after{
      transform: scaleX(1);
      }

      /* Fade to black when intro ends */
      .cinematic-intro.fade-to-black .intro-grid,
      .cinematic-intro.fade-to-black .intro-halo{ opacity:0 !important; transition:opacity .5s cubic-bezier(.4,0,.2,1) !important; }
      .cinematic-intro.fade-to-black .intro-content{ opacity:0 !important; transition:opacity .6s cubic-bezier(.4,0,.2,1) !important; }

      /* Footer */
      footer{
      background:linear-gradient(180deg,#000 0%,#0a0a0a 100%);
      padding:80px 0 40px; border-top:1px solid rgba(255,255,255,.08); text-align:center; position:relative; z-index:10;
      opacity:0;                     /* add this */
      transform: translateY(12px);
      transition:
         opacity .6s cubic-bezier(.4,0,.2,1),
         transform .6s cubic-bezier(.4,0,.2,1);
      }
      footer.visible{
      opacity:1;
      transform: translateY(0);
      }

      /* Put footer above the scrub section (which is z-index:100) */
      /* Footer sits above the sticky scrub layer */
      .footer-fixed{ position:fixed; left:0; right:0; bottom:0; z-index:101; }
      .footer-copyright{ color:#515154; font-size:14px; }

      /* Utility */
      .gradient-brand-text{
        background:var(--brand-text-gradient);
        -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; color:transparent;
      }
      @media (max-width:768px){
        .scrub-beat h2{ font-size:36px; }
        .scrub-beat p{ font-size:18px; }
      }

      /* Lock-at-end mode: keep last beat on screen with footer pinned; no scrolling */
      html.end-lock, body.end-lock{ height:100%; overflow:hidden; }
      .end-lock #scrollScrub{ height:100vh !important; }
      .end-lock .scroll-scrub-content{ position:fixed; inset:0; }
    </style>
  </head>
  <body>
    <div class="loading-bar"></div>

    <!-- Intro -->
    <div class="cinematic-intro" id="cinematicIntro">
      <div class="intro-grid"></div>
      <div class="intro-halo"></div>
      <div class="intro-content" id="introContent">
        <h1 class="intro-logo gradient-brand-text">MINTverse</h1>

        <div class="intro-tagline">
          <span>Hours become milliseconds.</span>
        </div>

        <p class="intro-context">The future of agent-based simulations. </p>
        <div class="title-cards">
          <div class="title-card" id="card1">
            <h2>200,000× faster</h2>
            <p>Than any agent-based system before it.</p>
          </div>
          <div class="title-card" id="card2">
            <h2>82,000 predictions</h2>
            <p>Every second. On your laptop.</p>
          </div>
          <div class="title-card" id="card3">
            <h2>64+ billion data points</h2>
            <p>Instantly queryable.</p>
          </div>
        </div>
      </div>

      <a href="#" class="skip-intro" onclick="skipIntro(); return false;">Skip movie</a>
    </div>

    <!-- Beats -->
    <div class="scroll-scrub-section" id="scrollScrub">
      <div class="scroll-scrub-content">
         <div class="scrub-beat" id="beat1" style="--copy-delay: 1.0s">
          <h2>One interface.</h2>
          <p>Every model. Every scenario.</p>
        </div>
        <div class="scrub-beat" id="beat2" style="--copy-delay: 1.0s">
          <h2>Perfectly reproducible.</h2>
          <p>Today. Tomorrow. Always.</p>
        </div>
        <div class="scrub-beat" id="beat3" style="--copy-delay: 1.0s">
          <h2>Ready to ship.</h2>
          <p>From research to production. Instantly.</p>
        </div>
        <div class="scrub-beat" id="beat4" style="--copy-delay: 1.25s">
          <h2>Coming soon.</h2>
          <p>Q4 2025.</p>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer id="footer">
      <div class="container">
        <p>MINTverse © 2025 • Built for malaria intervention research</p>
        <p style="opacity:.75;margin-top:8px">Fast emulation of malariasimulation models using deep learning</p>
      </div>
    </footer>

    <script>
      /* Scroll lock during intro */
      const ScrollLock = (() => {
        let locked = false;
        function prevent(e){ e.preventDefault(); }
        function keyguard(e){
          const keys = [32,33,34,35,36,37,38,39,40];
          if (keys.includes(e.keyCode)) e.preventDefault();
        }
        return {
          enable(){
            if (locked) return;
            locked = true;
            document.documentElement.classList.add('intro-lock');
            document.body.classList.add('intro-lock');
            window.addEventListener('wheel', prevent, { passive:false });
            window.addEventListener('touchmove', prevent, { passive:false });
            window.addEventListener('keydown', keyguard, { passive:false });
          },
          disable(){
            if (!locked) return;
            locked = false;
            document.documentElement.classList.remove('intro-lock');
            document.body.classList.remove('intro-lock');
            window.removeEventListener('wheel', prevent);
            window.removeEventListener('touchmove', prevent);
            window.removeEventListener('keydown', keyguard);
          }
        };
      })();

      let introComplete = false;

      function cinematicSequence(){
        const cards = [
          document.getElementById('card1'),
          document.getElementById('card2'),
          document.getElementById('card3')
        ];
        /* make header compact just before cards start (prevents overlap) */
        setTimeout(() => {
          document.getElementById('introContent')?.classList.add('cards-phase');
        }, 5600);

        setTimeout(() => { if(!introComplete) cards[0].classList.add('active'); }, 6000);
        setTimeout(() => {
          if(!introComplete){ cards[0].classList.remove('active'); cards[1].classList.add('active'); }
        }, 8500);
        setTimeout(() => {
          if(!introComplete){ cards[1].classList.remove('active'); cards[2].classList.add('active'); }
        }, 11000);
        setTimeout(() => {
          if(!introComplete){ cards[2].classList.remove('active'); endIntro(); }
        }, 13500);
      }

      function skipIntro(){ introComplete = true; endIntro(); }

      function endIntro(){
        const intro = document.getElementById('cinematicIntro');
        const scrollScrub = document.getElementById('scrollScrub');
        const halo = document.querySelector('.intro-halo');

        if (halo) halo.style.display = 'none';
        intro.classList.add('fade-to-black');

        // fade out, unlock, then show beats
        setTimeout(() => {
          intro.classList.add('hide');
          setTimeout(() => {
            intro.classList.add('complete');
            ScrollLock.disable();

            // reveal beats
            scrollScrub.style.display = 'block';
            scrollScrub.style.opacity = '0';
            setTimeout(() => {
              scrollScrub.style.transition = 'opacity .8s cubic-bezier(.4,0,.2,1)';
              scrollScrub.style.opacity = '1';
              setTimeout(() => {
                const beat1 = document.getElementById('beat1');
                if (beat1){
                  beat1.classList.add('active','fade-in');
                  beat1.addEventListener('animationend', () => beat1.classList.remove('fade-in'), { once:true });
                }
                initScrollScrub();
              }, 200);
            }, 300);
          }, 20);
        }, 600);
      }

      /* Scroll scrubbing between beats + lock at end */
      function initScrollScrub(){
        const scrubSection = document.getElementById('scrollScrub');
        const beats = [ 'beat1','beat2','beat3','beat4' ].map(id => document.getElementById(id));

        beats[0].classList.add('active','seen');

        let lastBeat = 0, lastDir = 0, holdUntil = 0;
        const HOLD_MS_FWD = 750, HOLD_MS_BACK = 450;

        function setBeat(i){
          beats.forEach(b => b.classList.remove('active'));
          beats[i].classList.add('active','seen');
          lastBeat = i;

          /* If we just hit the final beat, lock the page there */
          if (i === beats.length - 1) {
            lockAtEnd();
          }
        }

        window.addEventListener('scroll', () => {
          const scrollY = window.pageYOffset || document.documentElement.scrollTop;
          const top = scrubSection.offsetTop;
          const h = scrubSection.offsetHeight;
          const vh = window.innerHeight;

          if (scrollY >= top && scrollY <= top + h - vh) {
            const progress = Math.min(1, Math.max(0, (scrollY - top) / (h - vh)));
            const target = Math.min(beats.length - 1, Math.floor(progress * beats.length));
            const now = performance.now();
            const dir = Math.sign(target - lastBeat);

            if (dir !== 0) {
              if (dir !== lastDir) holdUntil = 0;
              if (now >= holdUntil) {
                const next = Math.abs(target - lastBeat) > 1 ? target : (lastBeat + dir);
                setBeat(next);
                holdUntil = now + (dir > 0 ? HOLD_MS_FWD : HOLD_MS_BACK);
                lastDir = dir;
              }
            }
          }
        });
      }

      let footerShown = false;
      function lockAtEnd(){
      document.documentElement.classList.add('end-lock');
      document.body.classList.add('end-lock');
      const footer = document.getElementById('footer');
      footer?.classList.add('footer-fixed');   // pin it, but keep hidden

      if (!footerShown) {
         footerShown = true;
         setTimeout(() => footer?.classList.add('visible'), 2500);
      }

      const top = document.getElementById('scrollScrub').offsetTop;
      window.scrollTo({ top, behavior: 'smooth' });
      }

      /* Boot */
      window.addEventListener('load', () => {
        ScrollLock.enable();
        cinematicSequence();

        setTimeout(() => {
          const loadingBar = document.querySelector('.loading-bar');
          if (loadingBar){ loadingBar.style.display = 'none'; }
        }, 1800);
      });
    </script>
  </body>
</html>
